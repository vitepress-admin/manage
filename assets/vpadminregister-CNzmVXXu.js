import{d as J,h as Q,r as d,b as W,o as u,c as w,m as n,G as X,p as t,q as s,y as R,t as p,w as Y,F as Z,z as j,A as k,e as h,H as ee,J as F,I as T,K as te,i as L,L as ae,u as se,M as oe,N as le,x as re,P as ne,Q as ie,R as de,S as ue,T as ce,U as pe,W as me,V as fe,X as _e,E as ge,_ as ve}from"./index-BAuvOH7U.js";/* empty css                */import{E as we,a as he}from"./el-form-item-CrUaNreY.js";import ye from"./RegistrationSuccess-CNfvJwmO.js";import{E as Ee}from"./index-BoDGaK97.js";import"./_baseClone-ClgyB-Pi.js";import"./_initCloneObject-B1WjiVDp.js";const be={class:"register-container"},Ve={class:"top-bar"},ke={class:"right-buttons"},Ce={class:"hover-effect"},Ie={class:"register"},$e={class:"title"},Pe=["src"],Re={key:0},Fe={key:1},Te={class:"text-center"},Le={class:"el-register-footer"},Ne=J({__name:"vpadminregister",setup(qe){const{t:i}=Q(),C=se(),y=d(!1),o=d({tenantId:"000001",username:"",password:"",confirmPassword:"",code:"",uuid:"",userType:"vpadmin_user"}),I=d(!1),E=d([]),N=(a,e,l)=>{/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)?l():l(new Error(i("invalidEmailFormat")))},q=(a,e,l)=>{/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,}$/.test(e)?l():l(new Error(i("passwordRequirements")))},U=(a,e,l)=>{e!==o.value.password?l(new Error(i("passwordsDoNotMatch"))):l()},M={username:[{required:!0,trigger:"blur",message:i("pleaseEnterEmail")},{validator:N,trigger:"blur"}],password:[{required:!0,trigger:"blur",message:i("pleaseEnterPassword")},{validator:q,trigger:"blur"}],confirmPassword:[{required:!0,trigger:"blur",message:i("pleaseConfirmPassword")},{validator:U,trigger:"blur"}],code:[{required:!0,trigger:"change",message:i("pleaseEnterVerificationCode")}]},$=d(""),m=d(!1),f=d(!0),P=d(),b=()=>{var a;(a=P.value)==null||a.validate(async e=>{if(e){m.value=!0;const[l]=await fe(_e(o.value));l?(m.value=!1,f.value&&V(),ge.error(i("registrationFailed"))):y.value=!0}})},S=()=>{y.value=!1,C.push({path:"/login",query:{showEmail:"true"}})},B=()=>{window.open("/free-themes","_blank")},V=async()=>{const a=await oe(),{data:e}=a;f.value=e.captchaEnabled===void 0?!0:e.captchaEnabled,f.value&&($.value="data:image/gif;base64,"+e.img,o.value.uuid=e.uuid)},A=async()=>{const{data:a}=await le();if(I.value=a.tenantEnabled===void 0?!0:a.tenantEnabled,I.value){E.value=a.voList;const e=E.value.find(l=>l.tenantId==="000001");e&&(o.value.tenantId=e.tenantId)}},D=()=>{window.open("https://www.vpadmin.org","_blank")},K=()=>{C.push("/login")};return W(()=>{V(),A()}),(a,e)=>{const l=re,_=ne,z=ie,G=de,H=ue,c=we,g=ce,v=pe,O=he,x=Ee;return u(),w("div",be,[n("div",Ve,[e[5]||(e[5]=n("a",{href:"https://www.vpadmin.org",target:"_blank",class:"logo-link"},[n("img",{src:X,alt:"Vpadmin Logo",class:"logo"})],-1)),n("div",ke,[t(_,{content:a.$t("navbar.themes"),effect:"light",placement:"bottom"},{default:s(()=>[t(l,{link:"",type:"primary",onClick:D},{default:s(()=>[R(p(a.$t("guide")),1)]),_:1})]),_:1},8,["content"]),t(_,{content:a.$t("navbar.themes"),effect:"light",placement:"bottom"},{default:s(()=>[n("div",Ce,[t(z,{"icon-class":"theme",style:{color:"#0b57d0"},onClick:B})])]),_:1},8,["content"])])]),n("div",Ie,[t(x,{class:"register-card"},{default:s(()=>[n("h2",$e,p(a.$t("createVpadminAccount")),1),t(O,{ref_key:"registerRef",ref:P,model:o.value,rules:M,class:"register-form"},{default:s(()=>[Y(t(c,{prop:"tenantId"},{default:s(()=>[t(H,{modelValue:o.value.tenantId,"onUpdate:modelValue":e[0]||(e[0]=r=>o.value.tenantId=r),filterable:"",placeholder:a.$t("selectOrEnterCompanyName"),style:{width:"100%"}},{default:s(()=>[(u(!0),w(Z,null,j(E.value,r=>(u(),k(G,{key:r.tenantId,label:r.companyName,value:r.tenantId},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},512),[[me,!1]]),t(c,{prop:"username"},{default:s(()=>[t(v,{modelValue:o.value.username,"onUpdate:modelValue":e[1]||(e[1]=r=>o.value.username=r),type:"text",placeholder:a.$t("email")},{prefix:s(()=>[t(g,null,{default:s(()=>[t(h(ee))]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1}),t(c,{id:"password-item",prop:"password"},{default:s(()=>[t(v,{modelValue:o.value.password,"onUpdate:modelValue":e[2]||(e[2]=r=>o.value.password=r),type:"password",placeholder:a.$t("password")},{prefix:s(()=>[t(g,null,{default:s(()=>[t(h(F))]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1}),t(c,{prop:"confirmPassword"},{default:s(()=>[t(v,{modelValue:o.value.confirmPassword,"onUpdate:modelValue":e[3]||(e[3]=r=>o.value.confirmPassword=r),type:"password",placeholder:a.$t("confirmPassword"),onKeyup:T(b,["enter"])},{prefix:s(()=>[t(g,null,{default:s(()=>[t(h(F))]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1}),f.value?(u(),k(c,{key:0,prop:"code",class:"verify-code-item"},{default:s(()=>[t(v,{modelValue:o.value.code,"onUpdate:modelValue":e[4]||(e[4]=r=>o.value.code=r),"auto-complete":"off",placeholder:a.$t("verificationCode"),onKeyup:T(b,["enter"])},{prefix:s(()=>[t(g,null,{default:s(()=>[t(h(te))]),_:1})]),_:1},8,["modelValue","placeholder"]),n("img",{src:$.value,class:"register-code-img",onClick:V},null,8,Pe)]),_:1})):L("",!0),t(c,null,{default:s(()=>[t(l,{loading:m.value,type:"primary",class:"register-button",onClick:ae(b,["prevent"])},{default:s(()=>[m.value?(u(),w("span",Fe,p(a.$t("registering")),1)):(u(),w("span",Re,p(a.$t("register")),1))]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),n("div",Te,[t(l,{class:"link-button",onClick:K},{default:s(()=>[R(p(a.$t("alreadyHaveAccount")),1)]),_:1})])]),_:1})]),n("div",Le,[n("span",null,p(a.$t("copyright",{year:new Date().getFullYear()})),1)]),y.value?(u(),k(ye,{key:0,username:o.value.username,onCountdownFinished:S},null,8,["username"])):L("",!0)])}}}),ze=ve(Ne,[["__scopeId","data-v-2af8625d"]]);export{ze as default};
