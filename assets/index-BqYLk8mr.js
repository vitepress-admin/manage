import{d as m,r as p,b as y,n as b,w as k,e as v,o as x,c as T,a as E,g as I,v as B,f as C,l as q,s as R,E as d,_ as S}from"./index-Dz1U06Ul.js";const J={class:"social-callback"},L=m({__name:"index",setup(M){const o=E(),s=p(!0),u=o.query.code,c=o.query.state,f=o.query.source,n=JSON.parse(atob(c)),w=n.tenantId?n.tenantId:"000000",i=n.domain,r=async e=>{if(e.code!==200)throw new Error(e.msg);e.data!==null&&R(e.data.access_token),d.success(e.msg),setTimeout(()=>{location.href=e.data.redirect||"/index"},2e3)},l=e=>{d.error(e.message),setTimeout(()=>{location.href="/index"},2e3)},_=async e=>{try{const t=await C(e);await r(t),s.value=!1}catch(t){l(t)}},g=async e=>{try{const t=await q(e);await r(t),s.value=!1}catch(t){l(t)}},h=async()=>{let e=window.location.origin;if(i!==e){let a=new URL(window.location.href);a.host=i,window.location.href=a.toString();return}const t={socialCode:u,socialState:c,tenantId:w,source:f,clientId:"436efb388d684aadab73ef3cbba8f287",grantType:"socialPortal",redirect:window.location.href};I()?await g(t):await _(t)};return y(()=>{b(()=>{h()})}),(e,t)=>{const a=B;return k((x(),T("div",J,null,512)),[[a,v(s)]])}}}),F=S(L,[["__scopeId","data-v-44554f74"]]);export{F as default};
