import{d as ee,ac as W,r as g,ad as H,b as Ce,ai as Ve,o as c,c as T,p as a,q as o,w as v,m as J,e as l,I as V,F as X,z as Y,A as b,y as _,W as Z,ah as Ie,ag as De,t as Ee,a3 as ke,U as we,R as Ue,S as Ne,x as Se,P as qe,B as Fe,v as Re,_ as Te}from"./index-BAuvOH7U.js";/* empty css                  *//* empty css                       *//* empty css                 */import{_ as Ge}from"./index-DhWSmCN8.js";import{E as $e,a as Le}from"./el-table-column-BxuOrZRB.js";import"./el-checkbox-CJO2Nzt4.js";import{_ as Pe}from"./index-BXNun8fK.js";/* empty css               */import{_ as Ae}from"./index-7ap4Krm6.js";/* empty css               *//* empty css                */import{E as Be,a as Ke}from"./el-form-item-CrUaNreY.js";import{a as ze,g as he,u as Oe,b as Qe,d as je}from"./index-COXZTpc1.js";import{E as Me}from"./index-BoDGaK97.js";import{E as We}from"./index-DqZK7Cst.js";import{E as He}from"./index-D0kpylGG.js";import{E as Je,a as Xe}from"./index-BD5zlYpL.js";import"./_initCloneObject-B1WjiVDp.js";/* empty css                */import"./index-mIx5X0h3.js";import"./_baseClone-ClgyB-Pi.js";const Ye={class:"p-2"},Ze={class:"mb-[10px]"},ea={class:"dialog-footer"},aa=ee({name:"GiftcardConfig"}),la=ee({...aa,setup(ta){const{proxy:r}=ke(),{vpa_giftcard_status:U}=W(r==null?void 0:r.useDict("vpa_giftcard_status")),G=g([]),I=g(!1),D=g(!0),E=g(!0),N=g([]),$=g(!0),L=g(!0),S=g(0),P=g(),q=g(),p=H({visible:!1,title:""}),A={id:void 0,cardId:void 0,cardName:"ThemeGiftCard",denomination:10,validDays:60,status:void 0,deptId:void 0,userId:void 0},F={cardName:"ThemeGiftCard",denomination:10,validDays:60},ae=H({form:{...A},queryParams:{pageNum:1,pageSize:10,cardId:void 0,cardName:void 0,denomination:void 0,validDays:void 0,status:void 0,userId:void 0,params:{}},rules:{id:[{required:!0,message:"主键不能为空",trigger:"blur"}],cardId:[{required:!0,message:"礼品卡ID不能为空",trigger:"blur"}],cardName:[{required:!0,message:"礼品卡名称不能为空",trigger:"blur"}],denomination:[{required:!0,message:"面值不能为空",trigger:"blur"}],validDays:[{required:!0,message:"有效天数不能为空",trigger:"blur"}],status:[{required:!0,message:"状态(0-启用 1-停用 2-已使用 3-已过期)不能为空",trigger:"change"}],deptId:[{required:!0,message:"部门id不能为空",trigger:"blur"}],userId:[{required:!0,message:"用户id不能为空",trigger:"blur"}]}}),{queryParams:i,form:d,rules:le}=W(ae),B=()=>{const n="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx-xxxxxxxxxxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const s=Math.random()*16|0;return(e==="x"?s:s&3|8).toString(16)});d.value.cardId=n.replace(/-/g,"").toUpperCase()},te=n=>{k();const e={...n};delete e.id,delete e.cardId,Object.assign(d.value,e),B(),p.visible=!0,p.title="复制礼品卡配置"},C=async()=>{D.value=!0;const n=await ze(i.value);G.value=n.rows,S.value=n.total,D.value=!1},oe=()=>{k(),p.visible=!1},k=()=>{var n;d.value={...A},(n=q.value)==null||n.resetFields()},x=()=>{i.value.pageNum=1,C()},ne=()=>{var n;(n=P.value)==null||n.resetFields(),x()},de=n=>{N.value=n.map(e=>e.id),$.value=n.length!=1,L.value=!n.length},ie=()=>{k(),d.value.cardName=F.cardName,d.value.denomination=F.denomination,d.value.validDays=F.validDays,p.visible=!0,p.title="添加礼品卡配置"},K=async n=>{k();const e=(n==null?void 0:n.id)||N.value[0],s=await he(e);Object.assign(d.value,s.data),p.visible=!0,p.title="修改礼品卡配置"},re=()=>{var n;(n=q.value)==null||n.validate(async e=>{e&&(I.value=!0,d.value.id?await Oe(d.value).finally(()=>I.value=!1):await Qe(d.value).finally(()=>I.value=!1),r==null||r.$modal.msgSuccess("操作成功"),p.visible=!1,await C())})},z=async n=>{const e=(n==null?void 0:n.id)||N.value;await(r==null?void 0:r.$modal.confirm('是否确认删除礼品卡配置编号为"'+e+'"的数据项？').finally(()=>D.value=!1)),await je(e),r==null||r.$modal.msgSuccess("删除成功"),await C()},se=()=>{r==null||r.download("vpadmin/giftcardConfig/export",{...i.value},`giftcardConfig_${new Date().getTime()}.xlsx`)};return Ce(()=>{C()}),(n,e)=>{var Q,j;const s=we,u=Be,ue=Ue,me=Ne,m=Se,h=Ke,O=Me,w=We,pe=Ae,ce=He,f=$e,fe=Pe,R=qe,ge=Le,ve=Ge,_e=Je,be=Xe,xe=Fe,y=Ve("hasPermi"),ye=Re;return c(),T("div",Ye,[a(Ie,{"enter-active-class":(Q=l(r))==null?void 0:Q.animate.searchAnimate.enter,"leave-active-class":(j=l(r))==null?void 0:j.animate.searchAnimate.leave},{default:o(()=>[v(J("div",Ze,[a(O,{shadow:"hover"},{default:o(()=>[a(h,{ref_key:"queryFormRef",ref:P,model:l(i),inline:!0},{default:o(()=>[a(u,{label:"礼品卡ID",prop:"cardId"},{default:o(()=>[a(s,{modelValue:l(i).cardId,"onUpdate:modelValue":e[0]||(e[0]=t=>l(i).cardId=t),placeholder:"请输入礼品卡ID",clearable:"",onKeyup:V(x,["enter"])},null,8,["modelValue"])]),_:1}),a(u,{label:"礼品卡名称",prop:"cardName"},{default:o(()=>[a(s,{modelValue:l(i).cardName,"onUpdate:modelValue":e[1]||(e[1]=t=>l(i).cardName=t),placeholder:"请输入礼品卡名称",clearable:"",onKeyup:V(x,["enter"])},null,8,["modelValue"])]),_:1}),a(u,{label:"面值",prop:"denomination"},{default:o(()=>[a(s,{modelValue:l(i).denomination,"onUpdate:modelValue":e[2]||(e[2]=t=>l(i).denomination=t),placeholder:"请输入面值",clearable:"",onKeyup:V(x,["enter"])},null,8,["modelValue"])]),_:1}),a(u,{label:"有效天数",prop:"validDays"},{default:o(()=>[a(s,{modelValue:l(i).validDays,"onUpdate:modelValue":e[3]||(e[3]=t=>l(i).validDays=t),placeholder:"请输入有效天数",clearable:"",onKeyup:V(x,["enter"])},null,8,["modelValue"])]),_:1}),a(u,{label:"状态(0-启用 1-停用 2-已使用 3-已过期)",prop:"status"},{default:o(()=>[a(me,{modelValue:l(i).status,"onUpdate:modelValue":e[4]||(e[4]=t=>l(i).status=t),placeholder:"请选择状态",clearable:""},{default:o(()=>[(c(!0),T(X,null,Y(l(U),t=>(c(),b(ue,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(u,{label:"用户id",prop:"userId"},{default:o(()=>[a(s,{modelValue:l(i).userId,"onUpdate:modelValue":e[5]||(e[5]=t=>l(i).userId=t),placeholder:"请输入用户id",clearable:"",onKeyup:V(x,["enter"])},null,8,["modelValue"])]),_:1}),a(u,null,{default:o(()=>[a(m,{type:"primary",icon:"Search",onClick:x},{default:o(()=>e[19]||(e[19]=[_("搜索")])),_:1}),a(m,{icon:"Refresh",onClick:ne},{default:o(()=>e[20]||(e[20]=[_("重置")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1})],512),[[Z,l(E)]])]),_:1},8,["enter-active-class","leave-active-class"]),a(O,{shadow:"never"},{header:o(()=>[a(ce,{gutter:10,class:"mb8"},{default:o(()=>[a(w,{span:1.5},{default:o(()=>[v((c(),b(m,{type:"primary",plain:"",icon:"Plus",onClick:ie},{default:o(()=>e[21]||(e[21]=[_("新增")])),_:1})),[[y,["vpadmin:giftcardConfig:add"]]])]),_:1}),a(w,{span:1.5},{default:o(()=>[v((c(),b(m,{type:"success",plain:"",icon:"Edit",disabled:l($),onClick:e[6]||(e[6]=t=>K())},{default:o(()=>e[22]||(e[22]=[_("修改")])),_:1},8,["disabled"])),[[y,["vpadmin:giftcardConfig:edit"]]])]),_:1}),a(w,{span:1.5},{default:o(()=>[v((c(),b(m,{type:"danger",plain:"",icon:"Delete",disabled:l(L),onClick:e[7]||(e[7]=t=>z())},{default:o(()=>e[23]||(e[23]=[_("删除")])),_:1},8,["disabled"])),[[y,["vpadmin:giftcardConfig:remove"]]])]),_:1}),a(w,{span:1.5},{default:o(()=>[v((c(),b(m,{type:"warning",plain:"",icon:"Download",onClick:se},{default:o(()=>e[24]||(e[24]=[_("导出")])),_:1})),[[y,["vpadmin:giftcardConfig:export"]]])]),_:1}),a(pe,{showSearch:l(E),"onUpdate:showSearch":e[8]||(e[8]=t=>De(E)?E.value=t:null),onQueryTable:C},null,8,["showSearch"])]),_:1})]),default:o(()=>[v((c(),b(ge,{data:l(G),onSelectionChange:de},{default:o(()=>[a(f,{type:"selection",width:"55",align:"center"}),(c(),b(f,{key:0,label:"主键",align:"center",prop:"id"})),a(f,{label:"礼品卡ID",align:"center",prop:"cardId"}),a(f,{label:"礼品卡名称",align:"center",prop:"cardName"}),a(f,{label:"面值",align:"center",prop:"denomination"}),a(f,{label:"有效天数",align:"center",prop:"validDays"}),a(f,{label:"状态",align:"center",prop:"status"},{default:o(t=>[a(fe,{options:l(U),value:t.row.status},null,8,["options","value"])]),_:1}),a(f,{label:"部门id",align:"center",prop:"deptId"}),a(f,{label:"用户id",align:"center",prop:"userId"}),a(f,{label:"操作",align:"center","class-name":"small-padding fixed-width"},{default:o(t=>[a(R,{content:"复制",placement:"top"},{default:o(()=>[v(a(m,{link:"",type:"primary",icon:"CopyDocument",onClick:M=>te(t.row)},null,8,["onClick"]),[[y,["vpadmin:giftcardConfig:add"]]])]),_:2},1024),a(R,{content:"修改",placement:"top"},{default:o(()=>[v(a(m,{link:"",type:"primary",icon:"Edit",onClick:M=>K(t.row)},null,8,["onClick"]),[[y,["vpadmin:giftcardConfig:edit"]]])]),_:2},1024),a(R,{content:"删除",placement:"top"},{default:o(()=>[v(a(m,{link:"",type:"primary",icon:"Delete",onClick:M=>z(t.row)},null,8,["onClick"]),[[y,["vpadmin:giftcardConfig:remove"]]])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[ye,l(D)]]),v(a(ve,{page:l(i).pageNum,"onUpdate:page":e[9]||(e[9]=t=>l(i).pageNum=t),limit:l(i).pageSize,"onUpdate:limit":e[10]||(e[10]=t=>l(i).pageSize=t),total:l(S),onPagination:C},null,8,["page","limit","total"]),[[Z,l(S)>0]])]),_:1}),a(xe,{modelValue:l(p).visible,"onUpdate:modelValue":e[18]||(e[18]=t=>l(p).visible=t),title:l(p).title,width:"500px","append-to-body":""},{footer:o(()=>[J("div",ea,[a(m,{loading:l(I),type:"primary",onClick:re},{default:o(()=>e[26]||(e[26]=[_("确 定")])),_:1},8,["loading"]),a(m,{onClick:oe},{default:o(()=>e[27]||(e[27]=[_("取 消")])),_:1})])]),default:o(()=>[a(h,{ref_key:"giftcardConfigFormRef",ref:q,model:l(d),rules:l(le),"label-width":"100px"},{default:o(()=>[a(u,{label:"礼品卡ID",prop:"cardId",class:"custom-form-item"},{default:o(()=>[a(s,{modelValue:l(d).cardId,"onUpdate:modelValue":e[11]||(e[11]=t=>l(d).cardId=t),placeholder:"请输入礼品卡ID",class:"custom-input"},null,8,["modelValue"]),a(m,{type:"primary",class:"generate-btn",onClick:B},{default:o(()=>e[25]||(e[25]=[_("生成UUID")])),_:1})]),_:1}),a(u,{label:"礼品卡名称",prop:"cardName"},{default:o(()=>[a(s,{modelValue:l(d).cardName,"onUpdate:modelValue":e[12]||(e[12]=t=>l(d).cardName=t),placeholder:"请输入礼品卡名称"},null,8,["modelValue"])]),_:1}),a(u,{label:"面值",prop:"denomination"},{default:o(()=>[a(s,{modelValue:l(d).denomination,"onUpdate:modelValue":e[13]||(e[13]=t=>l(d).denomination=t),placeholder:"请输入面值"},null,8,["modelValue"])]),_:1}),a(u,{label:"有效天数",prop:"validDays"},{default:o(()=>[a(s,{modelValue:l(d).validDays,"onUpdate:modelValue":e[14]||(e[14]=t=>l(d).validDays=t),placeholder:"请输入有效天数"},null,8,["modelValue"])]),_:1}),a(u,{label:"状态",prop:"status"},{default:o(()=>[a(be,{modelValue:l(d).status,"onUpdate:modelValue":e[15]||(e[15]=t=>l(d).status=t)},{default:o(()=>[(c(!0),T(X,null,Y(l(U),t=>(c(),b(_e,{key:t.value,value:t.value},{default:o(()=>[_(Ee(t.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(u,{label:"部门id",prop:"deptId"},{default:o(()=>[a(s,{modelValue:l(d).deptId,"onUpdate:modelValue":e[16]||(e[16]=t=>l(d).deptId=t),placeholder:"请输入部门id"},null,8,["modelValue"])]),_:1}),a(u,{label:"用户id",prop:"userId"},{default:o(()=>[a(s,{modelValue:l(d).userId,"onUpdate:modelValue":e[17]||(e[17]=t=>l(d).userId=t),placeholder:"请输入用户id"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}}),ka=Te(la,[["__scopeId","data-v-0b3dd60a"]]);export{ka as default};
