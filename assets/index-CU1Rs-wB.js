import{d as V,ac as K,r as p,b as P,ai as R,o as N,c as $,m as g,p as e,q as n,e as o,I as E,y as k,w,A as x,t as S,W as Q,a3 as A,V as M,U as O,x as W,P as j,v as G}from"./index-Dz1U06Ul.js";import{_ as H}from"./index-CfRSGlQf.js";import{E as J,a as X}from"./el-table-column-BtdUDimX.js";import"./el-checkbox-BP8O_R-g.js";import{_ as Y}from"./index-BpJW1tsl.js";/* empty css                */import{E as Z,a as ee}from"./el-form-item-BRz6LH5v.js";import{l as oe,f as te}from"./index-DRxKoHwv.js";import{E as le}from"./index-z7a3Kden.js";import"./_initCloneObject-bMWQ6BhU.js";import"./_baseClone-CTTMyzww.js";const ae={class:"p-2"},ne={class:"mb-[10px]"},re=V({name:"Online"}),ye=V({...re,setup(ie){const{proxy:s}=A(),{sys_device_type:C}=K(s==null?void 0:s.useDict("sys_device_type")),v=p([]),m=p(!0),c=p(0),b=p(),t=p({pageNum:1,pageSize:10,ipaddr:"",userName:""}),d=async()=>{m.value=!0;const i=await oe(t.value);v.value=i.rows,c.value=i.total,m.value=!1},u=()=>{t.value.pageNum=1,d()},T=()=>{var i;(i=b.value)==null||i.resetFields(),u()},L=async i=>{const[a]=await M(s==null?void 0:s.$modal.confirm('是否确认强退名称为"'+i.userName+'"的用户?'));a||(await te(i.tokenId),await d(),s==null||s.$modal.msgSuccess("删除成功"))};return P(()=>{d()}),(i,a)=>{const y=O,_=Z,f=W,z=ee,h=le,r=J,F=Y,I=j,B=X,D=H,U=R("hasPermi"),q=G;return N(),$("div",ae,[g("div",ne,[e(h,{shadow:"hover"},{default:n(()=>[e(z,{ref_key:"queryFormRef",ref:b,model:o(t),inline:!0},{default:n(()=>[e(_,{label:"登录地址",prop:"ipaddr"},{default:n(()=>[e(y,{modelValue:o(t).ipaddr,"onUpdate:modelValue":a[0]||(a[0]=l=>o(t).ipaddr=l),placeholder:"请输入登录地址",clearable:"",onKeyup:E(u,["enter"])},null,8,["modelValue"])]),_:1}),e(_,{label:"用户名称",prop:"userName"},{default:n(()=>[e(y,{modelValue:o(t).userName,"onUpdate:modelValue":a[1]||(a[1]=l=>o(t).userName=l),placeholder:"请输入用户名称",clearable:"",onKeyup:E(u,["enter"])},null,8,["modelValue"])]),_:1}),e(_,null,{default:n(()=>[e(f,{type:"primary",icon:"Search",onClick:u},{default:n(()=>a[4]||(a[4]=[k("搜索")])),_:1}),e(f,{icon:"Refresh",onClick:T},{default:n(()=>a[5]||(a[5]=[k("重置")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),e(h,{shadow:"hover"},{default:n(()=>[w((N(),x(B,{data:o(v).slice((o(t).pageNum-1)*o(t).pageSize,o(t).pageNum*o(t).pageSize),style:{width:"100%"}},{default:n(()=>[e(r,{label:"序号",width:"50",type:"index",align:"center"},{default:n(l=>[g("span",null,S((o(t).pageNum-1)*o(t).pageSize+l.$index+1),1)]),_:1}),e(r,{label:"会话编号",align:"center",prop:"tokenId","show-overflow-tooltip":!0}),e(r,{label:"登录名称",align:"center",prop:"userName","show-overflow-tooltip":!0}),e(r,{label:"客户端",align:"center",prop:"clientKey","show-overflow-tooltip":!0}),e(r,{label:"设备类型",align:"center"},{default:n(l=>[e(F,{options:o(C),value:l.row.deviceType},null,8,["options","value"])]),_:1}),e(r,{label:"所属部门",align:"center",prop:"deptName","show-overflow-tooltip":!0}),e(r,{label:"主机",align:"center",prop:"ipaddr","show-overflow-tooltip":!0}),e(r,{label:"登录地点",align:"center",prop:"loginLocation","show-overflow-tooltip":!0}),e(r,{label:"操作系统",align:"center",prop:"os","show-overflow-tooltip":!0}),e(r,{label:"浏览器",align:"center",prop:"browser","show-overflow-tooltip":!0}),e(r,{label:"登录时间",align:"center",prop:"loginTime",width:"180"},{default:n(l=>[g("span",null,S(i.parseTime(l.row.loginTime)),1)]),_:1}),e(r,{label:"操作",align:"center","class-name":"small-padding fixed-width"},{default:n(l=>[e(I,{content:"强退",placement:"top"},{default:n(()=>[w(e(f,{link:"",type:"primary",icon:"Delete",onClick:se=>L(l.row)},null,8,["onClick"]),[[U,["monitor:online:forceLogout"]]])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[q,o(m)]]),w(e(D,{page:o(t).pageNum,"onUpdate:page":a[2]||(a[2]=l=>o(t).pageNum=l),limit:o(t).pageSize,"onUpdate:limit":a[3]||(a[3]=l=>o(t).pageSize=l),total:o(c)},null,8,["page","limit","total"]),[[Q,o(c)>0]])]),_:1})])}}});export{ye as default};
