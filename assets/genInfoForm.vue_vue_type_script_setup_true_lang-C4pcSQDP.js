import{d as G,aq as x,r as U,k as M,D as H,b as J,A as g,q as l,e as n,o as d,p as e,y as u,m as I,i as q,c as V,w as K,U as X,F as N,z as k,a1 as Y,P as Z,Q as h,a0 as ee,R as le,ac as te,S as ae,x as ne,cw as oe,cx as ue,cy as de}from"./index-CvOCUbz8.js";import{a as me,E as re}from"./el-form-item-CC3-843t.js";/* empty css               *//* empty css                 *//* empty css                */import"./el-checkbox-CUJrHLxp.js";import{E as se}from"./el-tree-select-CzMaZhll.js";/* empty css               */import{l as pe}from"./index-BA2oEFly.js";import{E as fe}from"./index-Cn-jhugM.js";import{E as ie}from"./index-C0Krdv9p.js";import{E as be}from"./index-BrYv1yqp.js";const Ie=G({__name:"genInfoForm",props:{info:x.any.isRequired,tables:x.any.isRequired},setup(y){const{proxy:E}=Y(),F=U([]),P=U([]),T=y,o=M(()=>T.info),S=M(()=>T.tables),B=U({tplCategory:[{required:!0,message:"请选择生成模板",trigger:"blur"}],packageName:[{required:!0,message:"请输入生成包路径",trigger:"blur"}],moduleName:[{required:!0,message:"请输入生成模块名",trigger:"blur"}],businessName:[{required:!0,message:"请输入生成业务名",trigger:"blur"}],functionName:[{required:!0,message:"请输入生成功能名",trigger:"blur"}]}),D=()=>{o.value.subTableFkName=""},R=_=>{_!=="sub"&&(o.value.subTableName="",o.value.subTableFkName="")},z=_=>{S.value.forEach(t=>{const i=t.tableName;if(_===i){F.value=t.columns;return}})},O=async()=>{const _=await pe(),t=E==null?void 0:E.handleTree(_.data,"menuId");t&&(P.value=t)};return H(()=>T.info.subTableName,_=>{z(_)}),J(()=>{O()}),(_,t)=>{const i=Z,C=h,m=re,r=fe,s=ee("question-filled"),p=le,f=te,v=ae,j=se,c=ie,A=ne,L=oe,Q=ue,W=de,w=be,$=me;return d(),g($,{ref:"genInfoForm",model:n(o),rules:n(B),"label-width":"150px"},{default:l(()=>[e(w,null,{default:l(()=>[e(r,{span:12},{default:l(()=>[e(m,{prop:"tplCategory"},{label:l(()=>t[15]||(t[15]=[u("生成模板")])),default:l(()=>[e(C,{modelValue:n(o).tplCategory,"onUpdate:modelValue":t[0]||(t[0]=a=>n(o).tplCategory=a),onChange:R},{default:l(()=>[e(i,{label:"单表（增删改查）",value:"crud"}),e(i,{label:"树表（增删改查）",value:"tree"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(r,{span:12},{default:l(()=>[e(m,{prop:"packageName"},{label:l(()=>[t[16]||(t[16]=u(" 生成包路径 ")),e(f,{content:"生成在哪个java包下，例如 com.ruoyi.system",placement:"top"},{default:l(()=>[e(p,null,{default:l(()=>[e(s)]),_:1})]),_:1})]),default:l(()=>[e(v,{modelValue:n(o).packageName,"onUpdate:modelValue":t[1]||(t[1]=a=>n(o).packageName=a)},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{span:12},{default:l(()=>[e(m,{prop:"moduleName"},{label:l(()=>[t[17]||(t[17]=u(" 生成模块名 ")),e(f,{content:"可理解为子系统名，例如 system",placement:"top"},{default:l(()=>[e(p,null,{default:l(()=>[e(s)]),_:1})]),_:1})]),default:l(()=>[e(v,{modelValue:n(o).moduleName,"onUpdate:modelValue":t[2]||(t[2]=a=>n(o).moduleName=a)},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{span:12},{default:l(()=>[e(m,{prop:"businessName"},{label:l(()=>[t[18]||(t[18]=u(" 生成业务名 ")),e(f,{content:"可理解为功能英文名，例如 user",placement:"top"},{default:l(()=>[e(p,null,{default:l(()=>[e(s)]),_:1})]),_:1})]),default:l(()=>[e(v,{modelValue:n(o).businessName,"onUpdate:modelValue":t[3]||(t[3]=a=>n(o).businessName=a)},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{span:12},{default:l(()=>[e(m,{prop:"functionName"},{label:l(()=>[t[19]||(t[19]=u(" 生成功能名 ")),e(f,{content:"用作类描述，例如 用户",placement:"top"},{default:l(()=>[e(p,null,{default:l(()=>[e(s)]),_:1})]),_:1})]),default:l(()=>[e(v,{modelValue:n(o).functionName,"onUpdate:modelValue":t[4]||(t[4]=a=>n(o).functionName=a)},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{span:12},{default:l(()=>[e(m,null,{label:l(()=>[t[20]||(t[20]=u(" 上级菜单 ")),e(f,{content:"分配到指定菜单下，例如 系统管理",placement:"top"},{default:l(()=>[e(p,null,{default:l(()=>[e(s)]),_:1})]),_:1})]),default:l(()=>[e(j,{modelValue:n(o).parentMenuId,"onUpdate:modelValue":t[5]||(t[5]=a=>n(o).parentMenuId=a),data:n(P),props:{value:"menuId",label:"menuName",children:"children"},"value-key":"menuId","node-key":"menuId",placeholder:"选择上级菜单","check-strictly":"",filterable:"",clearable:"","highlight-current":""},null,8,["modelValue","data"])]),_:1})]),_:1}),e(r,{span:12},{default:l(()=>[e(m,{prop:"genType"},{label:l(()=>[t[21]||(t[21]=u(" 生成代码方式 ")),e(f,{content:"默认为zip压缩包下载，也可以自定义生成路径",placement:"top"},{default:l(()=>[e(p,null,{default:l(()=>[e(s)]),_:1})]),_:1})]),default:l(()=>[e(c,{modelValue:n(o).genType,"onUpdate:modelValue":t[6]||(t[6]=a=>n(o).genType=a),value:"0"},{default:l(()=>t[22]||(t[22]=[u("zip压缩包")])),_:1},8,["modelValue"]),e(c,{modelValue:n(o).genType,"onUpdate:modelValue":t[7]||(t[7]=a=>n(o).genType=a),value:"1"},{default:l(()=>t[23]||(t[23]=[u("自定义路径")])),_:1},8,["modelValue"])]),_:1})]),_:1}),n(o).genType=="1"?(d(),g(r,{key:0,span:24},{default:l(()=>[e(m,{prop:"genPath"},{label:l(()=>[t[24]||(t[24]=u(" 自定义路径 ")),e(f,{content:"填写磁盘绝对路径，若不填写，则生成到当前Web项目下",placement:"top"},{default:l(()=>[e(p,null,{default:l(()=>[e(s)]),_:1})]),_:1})]),default:l(()=>[e(v,{modelValue:n(o).genPath,"onUpdate:modelValue":t[9]||(t[9]=a=>n(o).genPath=a)},{append:l(()=>[e(W,null,{dropdown:l(()=>[e(Q,null,{default:l(()=>[e(L,{onClick:t[8]||(t[8]=a=>n(o).genPath="/")},{default:l(()=>t[26]||(t[26]=[u("恢复默认的生成基础路径")])),_:1})]),_:1})]),default:l(()=>[e(A,{type:"primary"},{default:l(()=>t[25]||(t[25]=[u(" 最近路径快速选择 "),I("i",{class:"el-icon-arrow-down el-icon--right"},null,-1)])),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})):q("",!0)]),_:1}),y.info.tplCategory=="tree"?(d(),V(N,{key:0},[t[30]||(t[30]=I("h4",{class:"form-header"},"其他信息",-1)),K(e(w,null,{default:l(()=>[e(r,{span:12},{default:l(()=>[e(m,null,{label:l(()=>[t[27]||(t[27]=u(" 树编码字段 ")),e(f,{content:"树显示的编码字段名， 如：dept_id",placement:"top"},{default:l(()=>[e(p,null,{default:l(()=>[e(s)]),_:1})]),_:1})]),default:l(()=>[e(C,{modelValue:n(o).treeCode,"onUpdate:modelValue":t[10]||(t[10]=a=>n(o).treeCode=a),placeholder:"请选择"},{default:l(()=>[(d(!0),V(N,null,k(y.info.columns,(a,b)=>(d(),g(i,{key:b,label:a.columnName+"："+a.columnComment,value:a.columnName},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(r,{span:12},{default:l(()=>[e(m,null,{label:l(()=>[t[28]||(t[28]=u(" 树父编码字段 ")),e(f,{content:"树显示的父编码字段名， 如：parent_Id",placement:"top"},{default:l(()=>[e(p,null,{default:l(()=>[e(s)]),_:1})]),_:1})]),default:l(()=>[e(C,{modelValue:n(o).treeParentCode,"onUpdate:modelValue":t[11]||(t[11]=a=>n(o).treeParentCode=a),placeholder:"请选择"},{default:l(()=>[(d(!0),V(N,null,k(n(o).columns,(a,b)=>(d(),g(i,{key:b,label:a.columnName+"："+a.columnComment,value:a.columnName},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(r,{span:12},{default:l(()=>[e(m,null,{label:l(()=>[t[29]||(t[29]=u(" 树名称字段 ")),e(f,{content:"树节点的显示名称字段名， 如：dept_name",placement:"top"},{default:l(()=>[e(p,null,{default:l(()=>[e(s)]),_:1})]),_:1})]),default:l(()=>[e(C,{modelValue:n(o).treeName,"onUpdate:modelValue":t[12]||(t[12]=a=>n(o).treeName=a),placeholder:"请选择"},{default:l(()=>[(d(!0),V(N,null,k(y.info.columns,(a,b)=>(d(),g(i,{key:b,label:a.columnName+"："+a.columnComment,value:a.columnName},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},512),[[X,y.info.tplCategory=="tree"]])],64)):q("",!0),y.info.tplCategory=="sub"?(d(),V(N,{key:1},[t[33]||(t[33]=I("h4",{class:"form-header"},"关联信息",-1)),e(w,null,{default:l(()=>[e(r,{span:12},{default:l(()=>[e(m,null,{label:l(()=>[t[31]||(t[31]=u(" 关联子表的表名 ")),e(f,{content:"关联子表的表名， 如：sys_user",placement:"top"},{default:l(()=>[e(p,null,{default:l(()=>[e(s)]),_:1})]),_:1})]),default:l(()=>[e(C,{modelValue:n(o).subTableName,"onUpdate:modelValue":t[13]||(t[13]=a=>n(o).subTableName=a),placeholder:"请选择",onChange:D},{default:l(()=>[(d(!0),V(N,null,k(n(S),(a,b)=>(d(),g(i,{key:b,label:a.tableName+"："+a.tableComment,value:a.tableName},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(r,{span:12},{default:l(()=>[e(m,null,{label:l(()=>[t[32]||(t[32]=u(" 子表关联的外键名 ")),e(f,{content:"子表关联的外键名， 如：user_id",placement:"top"},{default:l(()=>[e(p,null,{default:l(()=>[e(s)]),_:1})]),_:1})]),default:l(()=>[e(C,{modelValue:n(o).subTableFkName,"onUpdate:modelValue":t[14]||(t[14]=a=>n(o).subTableFkName=a),placeholder:"请选择"},{default:l(()=>[(d(!0),V(N,null,k(n(F),(a,b)=>(d(),g(i,{key:b,label:a.columnName+"："+a.columnComment,value:a.columnName},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})],64)):q("",!0)]),_:1},8,["model","rules"])}}});export{Ie as _};
